{"version":3,"sources":["assets\\Scripts\\Manager\\GameManager2.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import DragRotate from \"../../SymmetricGamePlay/Scripts/DragRotate\";\r\nimport Global from \"../Common/Base/Global\";\r\nimport Singleton from \"../Common/Singleton\";\r\nimport SoundManager from \"../Common/SoundManager\";\r\nconst { ccclass, property } = cc._decorator;\r\ndeclare const window: any;\r\n@ccclass\r\nexport default class GameManager2 extends Singleton<GameManager2> {\r\n    @property(SoundManager)\r\n    public soundManager: SoundManager = null;\r\n    endGame: boolean = false;\r\n    startAnchorX: number = -190;\r\n    endAnchorX: number = 190;\r\n    lengthOfSlider: number = 0;\r\n    firstTouch: boolean = false;\r\n    @property(cc.Node)\r\n    VFX_Node: cc.Node = null;\r\n    //UI Config\r\n    isCanStartGame: boolean = false;\r\n    @property(cc.Node)\r\n    Guide_in: cc.Node = null;\r\n    @property(cc.Node)\r\n    Guide_win: cc.Node = null;\r\n// Stage index of Puzze now;\r\n    indexPuzze11: number;\r\n    indexPuzze12: number;\r\n    indexPuzze2: number;\r\n    indexPuzze3: number;\r\n\r\n    // Area\r\n    @property(cc.Node)\r\n    FakeArea: cc.Node = null;\r\n    @property(cc.Node)\r\n    PlayArea: cc.Node = null;\r\n\r\n\r\n    @property(cc.Node)\r\n    arrayPuzze: cc.Node[] = [];\r\n\r\n    flag01: boolean = false;\r\n    flag02: boolean = false;\r\n\r\n    flag03: boolean = false;\r\n    flag04: boolean = false;\r\n\r\n\r\n    ironsource: boolean = false;\r\n    mindworks: boolean = false;\r\n    vungle: boolean = false;\r\n    //MyConfig\r\n    constructor() {\r\n        super();\r\n        GameManager2._instance = this;\r\n    }\r\n    start() {\r\n        if (this.mindworks){\r\n             window.gameReady && window.gameReady();\r\n        }\r\n        this.lengthOfSlider = this.endAnchorX - this.startAnchorX;\r\n        this.isCanStartGame = true;\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        // this.GetDistance2Point(this.arrayPuzze[2], this.arrayPuzze[3]);\r\n        this.StageCheckCorrect();\r\n    }\r\n    StageCheckCorrect(){\r\n\r\n        if(!this.endGame){\r\n            if(this.indexPuzze11 == 0 && this.indexPuzze12 == 0){\r\n                if(this.GetDistance2Point(this.arrayPuzze[0], this.arrayPuzze[1]) <= 158.5 && this.GetDistance2Point(this.arrayPuzze[0], this.arrayPuzze[1]) >= 148 ){\r\n                    if(this.arrayPuzze[0].position.x > this.arrayPuzze[1].x){\r\n                        if(Math.abs(this.arrayPuzze[0].position.y - this.arrayPuzze[1].y) < 1.5){\r\n                            if(!this.flag01){\r\n                                this.flag01 = true;\r\n                                this.arrayPuzze[0].getComponent(DragRotate).onDoneMerge = true;\r\n                                this.arrayPuzze[1].getComponent(DragRotate).onDoneMerge = true;\r\n                                this.scheduleOnce(()=>{\r\n                                    this.arrayPuzze[0].runAction(cc.moveTo(0.5, cc.v2(80, -126)) );\r\n                                    this.arrayPuzze[1].runAction(cc.moveTo(0.5, cc.v2(-77, -125)) );\r\n                                    this.scheduleOnce(()=>{\r\n                                        this.flag03 = true;\r\n                                    },0.5)\r\n                                },0.5)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(this.indexPuzze2 == 0 && this.indexPuzze3 == 0){\r\n                if(this.GetDistance2Point(this.arrayPuzze[2], this.arrayPuzze[3]) <= 158.5 && this.GetDistance2Point(this.arrayPuzze[2], this.arrayPuzze[3]) >= 148){\r\n                    if(this.arrayPuzze[3].position.x > this.arrayPuzze[2].x){\r\n                        if(Math.abs(this.arrayPuzze[2].position.y - this.arrayPuzze[3].y) < 1.5){\r\n                            if(!this.flag02){\r\n                                this.flag02 = true;\r\n                                this.arrayPuzze[2].getComponent(DragRotate).onDoneMerge = true;\r\n                                this.arrayPuzze[3].getComponent(DragRotate).onDoneMerge = true;\r\n                                this.scheduleOnce(()=>{\r\n                                    this.arrayPuzze[2].runAction(cc.moveTo(0.5, cc.v2(-76, 69.81)) );\r\n                                    this.arrayPuzze[3].runAction(cc.moveTo(0.5, cc.v2(80, 69.81)) );\r\n                                    this.scheduleOnce(()=>{\r\n                                        this.flag04 = true;\r\n                                    },0.5)\r\n                                },0.5)\r\n                            } \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(this.flag03 && this.flag04 ){\r\n                this.endGame = true;\r\n                this.scheduleOnce(()=>{\r\n                    this.IEC_ENDCARD();\r\n                }, 0.5);\r\n            }\r\n            if(this.firstTouch){\r\n                this.Guide_in.active = false;\r\n            }\r\n        }\r\n        // cc.log(\"indexPuzze11: \" + this.indexPuzze11);\r\n        // cc.log(\"indexPuzze12: \" + this.indexPuzze12);\r\n        // cc.log(\"indexPuzze2: \" + this.indexPuzze2);\r\n        // cc.log(\"indexPuzze3: \" + this.indexPuzze3);\r\n    }\r\n    // [0] [1] - distance 157 \r\n    // [2] [3] - distance 157 \r\n    // [0][1] [2][3] - \r\n \r\n    GetDistance2Point(node1: cc.Node, node2: cc.Node){ \r\n        let Temp1x = node1.position.x;\r\n        let Temp1y = node1.position.y;\r\n        let Temp2x = node2.position.x;\r\n        let Temp2y = node2.position.y;\r\n        let distancebyNode = this.Distance(cc.v2(Temp1x,Temp1y), cc.v2(Temp2x, Temp2y));\r\n        //cc.log(distancebyNode);\r\n        return distancebyNode;\r\n    }\r\n\r\n    Distance(vec1: cc.Vec2, vec2: cc.Vec2) {\r\n        let Distance = Math.sqrt(Math.pow(vec1.x - vec2.x, 2) + Math.pow(vec1.y - vec2.y, 2));\r\n        return Distance;\r\n    }\r\n\r\n    IEC_ENDCARD(){\r\n        cc.audioEngine.playEffect(this.soundManager.JokerVoice, false);\r\n        this.VFX_Node.active = true;\r\n        this.Guide_win.active = true;\r\n        this.EventNetWork();\r\n        this.endGame = true;\r\n        Global.boolEndGame = true;\r\n        this.scheduleOnce(()=>{\r\n            cc.audioEngine.playEffect(this.soundManager.BgSound, true);\r\n            this.PlayArea.active = false;\r\n            this.FakeArea.active = true;\r\n        }, 2)\r\n\r\n    }\r\n    EventNetWork() {\r\n        if (this.mindworks) {\r\n            window.gameEnd && window.gameEnd();\r\n        }\r\n        if (this.ironsource) {\r\n            window.NUC.trigger.endGame('win')\r\n        }\r\n        if (this.vungle) {\r\n            parent.postMessage('complete', '*');\r\n        }\r\n    }\r\n}\r\n"]}