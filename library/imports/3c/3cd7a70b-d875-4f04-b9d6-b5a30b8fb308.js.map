{"version":3,"sources":["assets\\Scripts\\Controller\\ObjectMove.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GlobalGamePlay from \"../Common/Base/GlobalGamePlay\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ObjectMove extends cc.Component {\r\n    @property(cc.BoxCollider)\r\n    boxCollider: cc.BoxCollider = null;\r\n    @property(cc.Float)\r\n    speedInit: number = 0;\r\n    @property(cc.Sprite)\r\n    img: cc.Sprite = null;\r\n    @property(cc.Node)\r\n    trail: cc.Node = null;\r\n    @property(cc.SpriteFrame)\r\n    arraySprites: cc.SpriteFrame[] = [];\r\n    @property(cc.SpriteFrame)\r\n    arraySpritesHurtNotes: cc.SpriteFrame[] = [];\r\n    @property(cc.Prefab)\r\n    effectPref: cc.Prefab[] = [];\r\n    isActive: boolean = false;\r\n    isHit: boolean = false;\r\n    isBonusScore: boolean = false;\r\n    currentSpeed: number = 0;\r\n    y: number = 0;\r\n    time: number = 0;\r\n    type: number = 0;\r\n    transformCollision: cc.Vec2 = null;\r\n    SetActive(type: number, scale: number, speed: number, isHit: boolean) {\r\n        this.type = type;\r\n        this.isHit = isHit;\r\n        this.isBonusScore = (scale != 0 && this.isHit);\r\n        if (isHit) {\r\n            this.boxCollider.enabled = true;\r\n            this.img.spriteFrame = this.arraySprites[type];\r\n\r\n            this.trail.scaleX = 1;\r\n            this.trail.scaleY = scale;\r\n            this.y = -306 - (100 * scale);\r\n        }\r\n        else {\r\n            this.boxCollider.enabled = false;\r\n            this.img.spriteFrame = this.arraySpritesHurtNotes[type];\r\n            //this.img = null;\r\n            this.trail.scale = 0;\r\n        }\r\n        this.currentSpeed = this.speedInit * speed;\r\n        this.isActive = true;\r\n    }\r\n    protected update(dt: number): void {\r\n        this.node.y += this.currentSpeed * dt;\r\n        if (this.node.y < -306 && this.isActive) {\r\n            if (!this.isHit) {\r\n                this.isActive = false;\r\n                this.node.destroy();\r\n                GlobalGamePlay.Instance(GlobalGamePlay).gameplay.EnemyAnimation(this.type);\r\n\r\n            }\r\n            else {\r\n                if (this.node.y < -410) {\r\n                    this.isActive = false;\r\n                    this.isBonusScore = false;\r\n                    GlobalGamePlay.Instance(GlobalGamePlay).gameplay.OnMiss();\r\n                    this.node.destroy();\r\n                }\r\n            }\r\n        }\r\n        if (this.isBonusScore && !this.isActive) {\r\n            if (this.transformCollision.x > this.node.x + 30 || this.transformCollision.x < this.node.x - 30 || this.node.y < this.y) {\r\n                this.isBonusScore = false;\r\n                this.node.destroy();\r\n\r\n                //Stop sound gun auto\r\n\r\n            }\r\n            else {\r\n                this.time += dt;\r\n                //Play sound gun auto\r\n                if (this.time > 0.1) {\r\n                    this.time = 0;\r\n                    GlobalGamePlay.Instance(GlobalGamePlay).gameplay.OnAddScore(30);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onCollisionEnter(Other: cc.Collider, mySelf: cc.Collider) {\r\n        if (this.isActive) {\r\n            this.isActive = false;\r\n            if (Other.node.group == \"ObjectTarget\") {\r\n                GlobalGamePlay.Instance(GlobalGamePlay).gameplay.PlayerAnimation(this.type);\r\n                if (this.node.y < Other.node.y) {\r\n                    GlobalGamePlay.Instance(GlobalGamePlay).gameplay.OnAddScore(250);\r\n                }\r\n                else {\r\n                    GlobalGamePlay.Instance(GlobalGamePlay).gameplay.OnAddScore(500);\r\n                }\r\n                //if (!this.isBonusScore) {\r\n                    //this.scheduleOnce(() => {\r\n                        this.node.destroy();\r\n                    //}, 0.1);\r\n                //}\r\n                //Play Sound Gun DE\r\n                // cc.audioEngine.playEffect(GlobalGamePlay.Instance(GlobalGamePlay).gameplay.soundManager.soundDE, false);\r\n                this.SpawnerEffectObject(this.type, mySelf.node);\r\n            }\r\n        }\r\n    }\r\n    SpawnerEffectObject(type: number, pos: cc.Node) {\r\n        var eff = cc.instantiate(this.effectPref[type]);\r\n        eff.setParent(GlobalGamePlay.Instance(GlobalGamePlay).gameplay.effectParent);\r\n        eff.setPosition(pos.x, pos.y - 20);\r\n    }\r\n}\r\n"]}